<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Todo List</title>

<style>
  body {
    font-family: Arial;
    display: flex;
    justify-content: center;
    padding-top: 40px;
    background: #f1f1f1;
  }

  .container {
    width: 350px;
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px #ccc;
  }

  input {
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    border-radius: 5px;
    border: 1px solid #aaa;
  }

  button {
    width: 100%;
    padding: 10px;
    background: #4caf50;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }

  button:hover {
    background: #45a049;
  }

  li {
    list-style: none;
    padding: 10px;
    background: #eee;
    margin-top: 8px;
    display: flex;
    justify-content: space-between;
    border-radius: 5px;
    cursor: pointer;
  }

  .completed {
    text-decoration: line-through;
    color: gray;
  }

  .deleteBtn {
    background: red;
    color: white;
    padding: 3px 8px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
</style>
</head>
<body>

  <div class="container">
    <h1>Todo List</h1>

    <input type="text" id="taskInput" placeholder="Enter task..." />
    <button id="addBtn">Add Task</button>

    <input type="text" id="searchInput" placeholder="Search task..." />

    <ul id="taskList"></ul>
  </div>

<script>
  let taskInput = document.getElementById("taskInput");
  let addBtn = document.getElementById("addBtn");
  let searchInput = document.getElementById("searchInput");
  let taskList = document.getElementById("taskList");

  function loadTasks() {
    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
    taskList.innerHTML = "";

    tasks.forEach(task => {
      let li = document.createElement("li");

      li.textContent = task.text;
      if (task.completed) li.classList.add("completed");

      li.onclick = () => toggleTask(task.id);

      let del = document.createElement("button");
      del.textContent = "X";
      del.className = "deleteBtn";
      del.onclick = (e) => {
        e.stopPropagation();
        deleteTask(task.id);
      };

      li.appendChild(del);
      taskList.appendChild(li);
    });
  }

  addBtn.onclick = function () {
    let text = taskInput.value.trim();
    if (!text) return;

    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

    let newTask = {
      id: Date.now(),
      text: text,
      completed: false
    };

    tasks.push(newTask);
    localStorage.setItem("tasks", JSON.stringify(tasks));

    taskInput.value = "";
    loadTasks();
  };

  function toggleTask(id) {
    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

    tasks = tasks.map(t => 
      t.id === id ? { ...t, completed: !t.completed } : t
    );

    localStorage.setItem("tasks", JSON.stringify(tasks));
    loadTasks();
  }

  function deleteTask(id) {
    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

    tasks = tasks.filter(t => t.id !== id);

    localStorage.setItem("tasks", JSON.stringify(tasks));
    loadTasks();
  }

  searchInput.oninput = function () {
    let keyword = searchInput.value.toLowerCase();
    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

    let filtered = tasks.filter(t => 
      t.text.toLowerCase().includes(keyword)
    );

    taskList.innerHTML = "";

    filtered.forEach(task => {
      let li = document.createElement("li");
      li.textContent = task.text;

      if (task.completed) li.classList.add("completed");

      let del = document.createElement("button");
      del.textContent = "X";
      del.className = "deleteBtn";
      del.onclick = (e) => {
        e.stopPropagation();
        deleteTask(task.id);
      };

      li.onclick = () => toggleTask(task.id);
      li.appendChild(del);
      taskList.appendChild(li);
    });
  };

  loadTasks();
</script>

</body>
</html>
